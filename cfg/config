#!/bin/bash

declare -A app
app['path']='/app/xge'
app['appname']='xge'
app['color']='bg-color-blue'
app['db.pass']='hjedvtht'
app['db.user']='KNL_USER'
app['ico']='icon-chart'
app['name']='Carbon XGE Router 5'
app['path']='/app/xge'
app['ip']='10.128.0.1 169.1.18.12'
app['ppp-server.ip']='10.128.0.1'
app['ppp-server.ip.widget']='ip "IP-адрес VPN-серверов" ""'
app['default_snat_enabled']='1'
app['default_snat_enabled.widget']='checkbox "Включить NAT серых сетей по умолчанию" "MASQUERADE для 192.168.0.0/16 10.0.0.0/8 и 172.16.0.0/12"'
app['widget']='menu "Настройки маршрутизатора"'
app['enabled']='1'
app['enabled.widget']='checkbox "Включить XGE Router" "Отключите, если XGE не используется на сервере"'

declare -A vpn
vpn['widget']='menu "Настройки VPN сервера" ""'
vpn['enabled']='1'
vpn['enabled.widget']='checkbox "Включить VPN-сервер" ""'
vpn['pptp.allow_external']='0'
vpn['pptp.allow_external.widget']='checkbox "Разрешить PPTP подключения со всех сетей" ""'
vpn['pptp.enabled']='1'
vpn['pptp.enabled.widget']='checkbox "Включить поддержку PPTP" ""'
vpn['pppoe.enabled']='1'
vpn['pppoe.enabled.widget']='checkbox "Включить поддержку PPPoE" ""'
vpn['l2tp.enabled']='1'
vpn['l2tp.enabled.widget']='checkbox "Включить поддержку L2TP" ""'
vpn['auth.pap']='1'
vpn['auth.pap.widget']='checkbox "Включить PAP-авторизацию" ""'
vpn['auth.chap_md5']='1'
vpn['auth.chap_md5.widget']='checkbox "Включить CHAP (md5) авторизацию" ""'
vpn['auth.mschap1']='1'
vpn['auth.mschap1.widget']='checkbox "Включить MS-CHAP v1" ""'
vpn['auth.mschap2']='1'
vpn['auth.mschap2.widget']='checkbox "Включить MS-CHAP v2" ""'
vpn['dns1.widget']='inputbox "DNS1 для абонентов" "DNS сервер, который будет отдаваться абонентам при vpn авторизации"'
vpn['dns1']='10.128.0.1'
vpn['dns2.widget']='inputbox "DNS2 для абонентов" "DNS сервер, который будет отдаваться абонентам при vpn авторизации"'
vpn['dns2']='8.8.8.8'

declare -A httpd
httpd['widget']='menu "Настройки встроенного редиректа"'

httpd['internal_ip']='169.0.80.90'
httpd['redirect_negbal_url']='http://169.1.0.80/html/negbal.php'
httpd['redirect_negbal_url.widget']='inputbox "Страница редиректа отрицательного баланса" ""'
httpd['redirect_blocked_url']='http://169.1.0.80/html/blocked.php'
httpd['redirect_blocked_url.widget']='inputbox "Страница редиректа заблокированных и не авторизованных абонентов" ""'
httpd['redirect_noauth_url']='http://169.1.0.80/html/noauth.php'
httpd['redirect_noauth_url.widget']='inputbox "Страница редиректа не авторизованных абонентов" ""'

httpd['redirect_webauth.enabled']='0'
httpd['redirect_webauth.enabled.widget']='checkbox "Включить веб-авторизацию" ""'
httpd['redirect_webauth_url']='http://169.0.80.90:446/html/webauth.php'
httpd['redirect_webauth_url.widget']='inputbox "Страница редиректа веб-авторизации" ""'

declare -A firewall
firewall['widget']='menu "Настройки файрвола"'
firewall['enabled']='1'
firewall['enabled.widget']='checkbox "Включить файрвол" ""'
firewall['new_limit_l']='2000'
firewall['new_limit_l.widget']='inputbox "Ограничить колво новых соед/сек из лок.сети" "Рекомендуется 500-1000"'
firewall['new_limit_e']='2000'
firewall['new_limit_e.widget']='inputbox "Ограничить колво новых соед/сек из Интернет" "Рекомендуется 500-1000"'
firewall['billing_ip']='169.1.0.80'
firewall['billing_ip.widget']='inputbox "IP адрес для перенаправления" "Обычно IP биллинга"'

declare -A qos
qos['widget']='menu "Настройки канала"'
qos['root_rate']='850000'
qos['root_rate.widget']='inputbox "Суммараная ширина каналов kbit" ""'
qos['reserved']=''
qos['reserved.widget']='inputbox "Зарезервировать kbit из канала для веб-страниц" "по-умолчанию расчетная 5%, но не более 20000кбит"'

qos['local_rate']='50000'
qos['local_rate.widget']='inputbox "Гарантированная ширина для локального kbit" ""'

qos['local_ceil']='500000'
qos['local_ceil.widget']='inputbox "Максимальная ширина для локального kbit" ""'

qos['city_rate']='50000'
qos['city_rate.widget']='inputbox "Гарантированная ширина для городского трафика(пиринг) kbit" ""'

qos['city_ceil']='500000'
qos['city_ceil.widget']='inputbox "Максимальная ширина для городского трафика(пиринг) kbit" ""'

declare -A remote_management
remote_management['widget']='menu "Настройки управления маршрутизатором" "Пароль задаётся в настройках Radius"'
remote_management['carbon_coad.enabled.widget']='checkbox "Включить обработчик radius coa" "Без него XGE-Router не будет корректно работать"'
remote_management['carbon_coad.enabled']='1'

declare -A nfusens
nfusens['widget']='menu "Настройки сенсора netflow" ""'
nfusens['enabled.widget']='checkbox "Включить nfusens" "Без него XGE-Router не будет корректно работать"'
nfusens['enabled']='1'
nfusens['collector']='169.1.99.96:9996'
nfusens['collector.widget']='inputbox "Сервер сбора статистики" "Адрес netflow-коллектора: IP:PORT"'

declare -A radclient
radclient['widget']='menu "Настройки Radius" "Настройки подключения к биллингу (АСР / ААА-серверу)"'
radclient['secret']='algosolarsystem'
radclient['secret.widget']='inputbox "Radius-secret" "Секретный ключ для доступа к биллингу (АСР / ААА-серверу)"'
radclient['authserver']='169.1.18.12:1812'
radclient['authserver.widget']='inputbox "Сервер авторизации" "Сервер авторизации, формат: IP:PORT"'
radclient['acctserver']='169.1.18.13:1813'
radclient['acctserver.widget']='inputbox "Сервер аккаунтинга" "Сервер аккаунтинга, формат: IP:PORT"'
radclient['coa_client.ip']='169.1.18.12'
radclient['coa_client.ip.widget']='inputbox "IP адрес COA-клиента" "формат: IP, обычно адрес биллинга"'
radclient['coa_client.passwd']='algosolarsystem'
radclient['coa_client.passwd.widget']='inputbox "Пароль COA-клиента" "формат: строка"'
radclient['users_psw']='algosolarsystem'
radclient['users_psw.widget']='inputbox "Общий пароль для IPoE авторизации" "формат: строка"'
radclient['coa_server.port']='3799'
radclient['coa_server.port.widget']='inputbox "Порт COA-сервера" "По умолчанию 3799"'
radclient['nas_identifier']='169.1.18.12'
radclient['nas_identifier.widget']='inputbox "IP адрес этого NAS-сервера" "Является идентификатором этого AS в настройках Radius-сервера биллинга"'

declare -A networks
networks['widget']='menu "Списки подсетей"'
networks['trust_blocked_list']=''
networks['trust_blocked_list.widget']='inputbox "Список подсетей доступных всегда и всем, в т.ч. не авторизованным и заблокированным" "Задавать через пробел"'
networks['trust_negbal_list']=''
networks['trust_negbal_list.widget']='inputbox "Список подсетей доступных при отрицательном балансе" "Задавать через пробел"'
networks['local_net.widget']='inputbox "Список всех абонентских и всех служебных сетей" "Задавать через пробел"'
networks['local_net']='192.168.0.0/16 172.16.0.0/12 10.0.0.0/8'

declare -A ctl
ctl['start']='/service start'
ctl['stop']='/service stop'
ctl['status']='/service status'

declare -A mount
mount['proc']='-t proc none /proc'
mount['dev']='-t devtmpfs none /dev'

declare -A named
named['widget']='menu "Настройки DNS сервера"'
named['enabled']='1'
named['enabled.widget']='checkbox "Включить DNS сервер" ""'

declare -A dhcrelay
dhcrelay['widget']='menu "Настройки DHCP-RELAY"'
dhcrelay['enabled']='0'
dhcrelay['enabled.widget']='checkbox "Включить DHCP-RELAY"'
dhcrelay['dhcp_server_ip']='192.168.122.1'
dhcrelay['dhcp_server_ip.widget']='inputbox "IPV4 Адрес DHCP сервера" ""'
dhcrelay['listen_int']='eth0'
dhcrelay['listen_int.widget']='inputbox "Список интерфейсов, на которых будет слушать DHCP-RELAY" ""'
